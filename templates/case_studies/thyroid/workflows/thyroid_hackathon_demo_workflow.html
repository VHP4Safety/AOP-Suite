{% extends "base.html" %}

{% block content %}
<h1 style="color: white;">Thyroid Case Demo Workflow for the Hackthon</h1>
<br>

<!---
<div class="container">
  <div class="row">
    <div id="table_id" class="col-12">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">Check</th>
            <th scope="col">Compound</th>
            <th scope="col">SMILES</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheck1" checked>
                  <label class="custom-control-label" for="customCheck1">1</label>
              </div>
            </td>
            <td>Bootstrap 4 CDN and Starter Template</td>
            <td>Cristina</td>
            <td>913</td>
            <td>2.846</td>
          </tr>
          <tr>
            <td>
              <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheck2">
                  <label class="custom-control-label" for="customCheck2">2</label>
              </div>
            </td>
            <td>Bootstrap Grid 4 Tutorial and Examples</td>
            <td>Cristina</td>
            <td>1.434</td>
            <td>3.417</td>
          </tr>
          <tr>
            <td>
              <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheck3">
                  <label class="custom-control-label" for="customCheck3">3</label>
              </div>
            </td>
            <td>Bootstrap Flexbox Tutorial and Examples</td>
            <td>Cristina</td>
            <td>1.877</td>
            <td>1.234</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
--->


<div class="container">
  <section>
      <p style="color: white;">Choose a compound:</p>
      <div class="dropdown-container">
          <select id="compound_id" name="compound_id" required>
              <option value="" disabled selected>Pick a compound from the list</option>
          </select>
      </div>
      <p style="color: white; margin-top: 20px;">Selected compound and SMILES:</p>
      <p id="selected_info" style="color: white; font-weight: bold;">None</p>
  </section>
</div>

<!--- Below is the part for getting a table with tick marks
<script>
  $(document).ready(function () {
    // Fetch KE options and populate KE dropdown sorted by KE Label
    $.getJSON("/get_dummy_data")
      .done(function (data) {

        // Populate KE ID dropdown
        const table = $("#table_id");
        table.empty();
        data.forEach((option) => {
          table.append(
            `<option value="${option.Compound}" data-title="${option.SMILES}">${option.Compound} - ${option.SMILES}</option>`,
            `<option value="${option.KElabel}" data-title="${option.KEtitle}">${option.KElabel} - ${option.KEtitle}</option>`,
          );
        });
      })
      .fail(function () {
        console.error("Failed to load KE options"); // Debug log
        $("#message").text("Failed to load Key Events").css("color", "red");
      });
    });
</script>
---> 


<script>
  // Fetch the list of compounds with their SMILES from the server
  $.getJSON("/get_compounds", function (data) {
      console.log(data); // Debug log
      const dropdown = $("#compound_id");
      dropdown.empty();
      dropdown.append('<option value="" disabled selected>Pick a compound from the list</option>');
      data.forEach(option => {
          dropdown.append(
              `<option value="${option.SMILES}" data-term="${option.Term}">${option.Term}</option>`
          );
      });
  });

  // Listen for changes in the dropdown and display the selected compound and SMILES
  $("#compound_id").on("change", function () {
      const selectedTerm = $(this).find(":selected").data("term");
      const selectedSMILES = $(this).val();
      console.log("Selected:", `${selectedTerm}: ${selectedSMILES}`); // Debug log
      $("#selected_info").text(selectedTerm && selectedSMILES ? `${selectedTerm}: ${selectedSMILES}` : "None");
  });
</script>

{% endblock %}
